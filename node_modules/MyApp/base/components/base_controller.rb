class BaseController < Appril::BaseController
  include Helpers

  map Admin::Cfg.server_url

  define_layout :layout, file: '../templates/layout'
  layout :layout
  engine :Liquid
  define_template(:index) {''}

  # client_url is highly important setup, do NOT remove
  define_template_var(:client_url, File.join([Admin::Cfg.dev_server_url, Admin::Cfg.client_url, environment].compact))

  def index
    render
  end

  def configs params
    {}
  end

  error 500 do |e|
    puts "\e[0;31m%s\e[0m" % e.inspect
    e.backtrace && e.backtrace.each {|l| puts "  \e[0;36m%s\e[0m" % l}
    e.message
  end
end
