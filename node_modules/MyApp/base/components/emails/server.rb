class Emails < BaseController
  include Crudle::Controller

  def configs params
    {
      email_types: Cfg.email_types,
      layouts: EmailLayout.select(:id, :name),
      status_map: {
        Active: true,
        Draft: false
      },
    }
  end

  private
  def model; Email end

  def order; :name end

  def name_filter params, dataset
    return if params[:name].nil? || params[:name].empty?
    dataset.where('name ILIKE ?', '%' << params[:name] << '%')
  end

  def subject_filter params, dataset
    return if params[:subject].nil? || params[:subject].empty?
    dataset.where('subject ILIKE ?', '%' << params[:subject] << '%')
  end

  # def list_serializer item
  #   serializer(item)
  # end

  # def editor_serializer item
  #   serializer(item)
  # end

  # def serializer item
  #   item
  # end

end
