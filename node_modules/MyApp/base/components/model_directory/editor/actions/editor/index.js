import MediumEditor from 'helpers/medium-editor'
import 'bootstrap/dist/js/umd/modal.js'

export default {
  props: {
    actionLabel: {
      type: String,
      default: 'OK'
    },
    action: {
      type: Function,
      required: true
    },
    close: {
      type: Function,
      required: true
    }
  },

  template: require('./template'),

  mounted() {
    $(this.$el).on('shown.bs.modal', () => {
      this.editor = MediumEditor(
        this.$el.querySelector('[name="content"]'),
        this.$el.querySelector('#toolbar')
      )
    })

    $(this.$el).modal({backdrop: 'static', keyboard: false})
  },

  beforeDestroy() {
    this.editor.destroy()
    $(this.$el).modal('hide')
  },

  methods: {

    trigger_action(evt) {
      this.action(this.editor.getContent())
    },

    trigger_close() {
      this.close()
    }
  }
}
