import {cloneDeep} from 'lodash'

import Approved from './approved'
import UpdatesRequested from './updates-requested'
import Updated from './updated'
import New from './new'

export default {
  props: ['profile'],
  template: require('./template'),

  components: {
    Approved,
    UpdatesRequested,
    Updated,
    New
  },

  computed: {
    active_component() {
      if (this.profile.approved)
        return 'Approved'

      if (this.profile.update_requested_at && !this.profile.review_requested_at)
        return 'UpdatesRequested'

      if (this.profile.review_requested_at && this.profile.update_requests)
        return 'Updated'

      return 'New'
    },
    requested_updates() {return cloneDeep(this.profile.update_requests || []).reverse()}
  }
}
