import {merge} from 'lodash'

export default {
  state: {
    email: null,
    filters: {},
    loading: false
  },

  mutations: {
    EMAIL_TASKS__PUSH_EMAILS({item}, emails) {
      item.emails.list = item.emails.list.concat(emails.list)
    },

    EMAIL_TASKS__SET_EMAILS({item}, emails) {
      item.emails = emails
    },

    EMAIL_TASKS__UPDATE_FILTERS({EmailTasks}, filters) {
      merge(EmailTasks.filters, filters)
    },

    EMAIL_TASKS__UPDATE_NUMBERS({item}, numbers) {
      item.numbers = numbers
    },

    EMAIL_TASKS__SET_EMAIL({EmailTasks}, email) {
      EmailTasks.email = email
    },

    EMAIL_TASKS__DELETE_EMAIL({item}, index) {
      item.emails.list.splice(index, 1)
      item.emails.total--
      item.emails.filtered--
    },

    EMAIL_TASKS__LOADING({EmailTasks}, status) {
      EmailTasks.loading = status
    }

  }
}
