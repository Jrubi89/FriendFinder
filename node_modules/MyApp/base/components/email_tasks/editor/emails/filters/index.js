import Serialize from 'form-serialize'
import {filter_emails} from '../../methods'

export default {
  props: ['task'],
  template: require('./template'),

  methods: {

    filter(evt) {
      let filters = Serialize(evt.target.closest('form'), {hash: true, empty: true})
      this.$store.commit('EMAIL_TASKS__UPDATE_FILTERS', filters)
      filter_emails.call(this)
    },

    reset_filters(evt) {
      let form = evt.target.closest('form')
      form.reset()
      let filters = Serialize(form, {hash: true, empty: true})
      this.$store.commit('EMAIL_TASKS__UPDATE_FILTERS', filters)
      filter_emails.call(this)
    }
  }
}
