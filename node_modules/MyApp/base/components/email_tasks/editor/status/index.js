import {scroll_top} from 'appril-utils'
import Alert from 'appril-alert'
import {filter_emails} from '../methods'

export default {
  props: ['task'],
  template: require('./template'),

  methods: {
    filter(status = null) {
      this.$store.commit('EMAIL_TASKS__UPDATE_FILTERS', {status})
      filter_emails.call(this)
    },

    cancel() {
      Alert.confirm('Are you sure?', {text: ''}, () => {
        this.api.cancel(this.task.id).send({
          success: () => {
            this.$store.commit('CRUDLE__UPDATE_ITEM', {canceled: true, finished: true})
          }
        })
      })
    }
  }
}
