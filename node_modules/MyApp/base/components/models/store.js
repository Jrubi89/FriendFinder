import {find, findIndex} from 'lodash'

export default {
  state: {},

  mutations: {

    USERS__ADD_PHOTO({item}, photo) {
      item.application_photos.unshift(photo)
    },


    USERS__DELETE_PHOTO({item}, photo_id) {
      let index = findIndex(item.application_photos, (p) => p.id === photo_id)
      if (index >= 0)
        item.application_photos.splice(index, 1)
    },


    USERS__REFRESH_PHOTO_SRC({item}, photo_id) {
      let photo = find(item.application_photos, (p) => (p.id == photo_id))
      if (photo) {
        photo.original_url = `${photo.original_url}?_=${Math.random()}`
        photo.thumb_url = `${photo.thumb_url}?_=${Math.random()}`
      }
    },


    USERS__SET_CREDITS({item}, credits) {
      item.credits = credits
    },

  }
}
