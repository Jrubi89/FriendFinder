import Emailer from 'components/users/emailer'

export default {
  props: ['item'],
  template: require('./template'),

  data: () => ({
    email: null
  }),

  components: {
    Emailer
  },

  methods: {

    prepare() {
      this.email = this.item.password_created_at ?
        'password_reset_instructions' :
        'account_activation_reminder'
    },

    send(subject, body) {
      this.api.password_create_or_reset_email(this.item.id, this.email, subject, body).send({
        success: () => this.close()
      })
    },

    close() {
      this.email = null
    }
  }
}
