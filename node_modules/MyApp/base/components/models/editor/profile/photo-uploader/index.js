import {trim} from 'lodash'
import Alert from 'appril-alert'

export default {
  props: ['item'],
  template: require('./template'),

  methods: {

    trigger() {
      this.$el.querySelector('[type="file"]').click()
    },

    upload(evt) {

      let reader = new FileReader()
      reader.onload = (event) => {
        this.api.upload_application_photo(this.item.id, trim(event.target.result.split(',')[1])).send({
          success: (photo) => this.$store.commit('USERS__ADD_PHOTO', photo)
        })
      }
      reader.readAsDataURL(evt.target.files[0])
    }
  }
}
