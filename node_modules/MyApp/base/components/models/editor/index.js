import Profile from './profile'
import Account from './account'
import Credits from './credits'
import Emails from 'components/users/emails'
import Authlogs from 'components/users/authlogs'

export default {
  template: require('./template'),

  components: {
    Profile,
    Account,
    Credits,
    Emails,
    Authlogs,
  },

  mounted() {
    let tab = this.url.params.tab || '#profile'
    $('[data-toggle="tab"][href="' + tab + '"]', this.$el).tab('show')
    this.update_editor_controls()
  },

  methods: {
    switch_tab(evt) {
      this.url.update(this.url.params, {tab: evt.target.getAttribute('href')})
      this.update_editor_controls()
    },

    update_editor_controls() {
      this.$store.commit('CRUDLE__UPDATE_UI', this.url.params.tab === '#account')
    }
  }
}
