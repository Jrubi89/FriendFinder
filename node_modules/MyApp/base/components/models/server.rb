class Models < Users

  WHITE_SPACE = ' '.freeze

  def configs params
    super.update({
      user_photos_url: URL.to_user_photos,
      stores: Cfg[:stores]
    })
  end

  def update_address user_id, address
    @user.update_columns(address)
    true
  end

  private
  def model; User.where(account_type: User::MODEL) end

  def editor_serializer user
    super.update({
      application_photos: user.application_photos.map(&:serialized),
      referred_by: referrer_for(user),
      credits: credits_for(user),
      age: user.age,
    })
  end

  def referrer_for user
    return unless user.referred_by
    return unless referrer = User.select(:username, :first_name, :last_name).find_by(id: user.referred_by)
    referrer.serializable_hash.update(url: referrer.url)
  end
end
