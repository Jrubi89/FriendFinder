import {map} from 'lodash'
import Serialize from 'form-serialize'
import Alert from 'appril-alert'
import utils from 'crudle/utils'
import {print_orders} from '../helpers'

export function trigger_export(_, evt) {
  let filters = Serialize(utils.filters_form, {hash: true})
  this.$el.querySelector('iframe#export').setAttribute('src', this.env.components.Orders.url('export', filters))
}

export function print(_, evt) {
  let orders = map(utils.selected_list_items, 'value')

  if (orders.length == 0)
    return Alert.warning('No orders selected')

  print_orders.call(this, orders)
}
