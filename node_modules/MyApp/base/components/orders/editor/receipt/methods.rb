class Orders

  def update_status order_id, status
    order = model.find_by(id: order_id) || halt(400, 'Order not found')
    response = order.send(status)
    halt(400, response) unless response == true
    order.serialized_with_products
  end

  def update_tracking_number order_id, tracking_number, shipping_service
    order = model.find_by(id: order_id) || halt(400, 'No order found by given ID')
    order.update_columns({
      tracking_number: tracking_number,
      carrier: shipping_service,
      shipped_at: Time.now.utc
    })
    true
  end

end
