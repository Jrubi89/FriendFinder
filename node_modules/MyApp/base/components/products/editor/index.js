import Product from './product'
import Contains from './contains'
import Photos from './photos'
import Inventory from './inventory'

export default {
  template: require('./template'),

  components: {
    Product,
    Contains,
    Photos,
    Inventory
  },

  mounted() {
    let tab = this.url.params.tab || '#product'
    $('[data-toggle="tab"][href="' + tab + '"]', this.$el).tab('show')
    this.update_editor_controls()
  },

  methods: {
    switch_tab(evt) {
      this.url.update(this.url.params, {tab: evt.target.getAttribute('href')})
      this.update_editor_controls()
    },

    update_editor_controls() {
      this.$store.commit('CRUDLE__UPDATE_UI', this.url.params.tab === '#product')
    }
  }
}
