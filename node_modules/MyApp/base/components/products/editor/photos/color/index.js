import {reduce} from 'lodash'
import Photo from './photo'
import {initiate_upload, upload} from '../methods'

export default {
  props: ['item'],
  template: require('./template'),

  computed: {
    photos() {
      let photos = this.item.color_photos || {}
      return reduce(this.$options.colors, ((result,color) => {
        if (photos[color])
          result.push({color, photo: photos[color]})
        return result
      }), [])
    }
  },

  components: {
    Photo
  },

  methods: {
    initiate_upload,
    upload
  }
}
