import CodeMirror from 'appril-codemirror'

export default {
  props: ['item'],
  template: require('./template'),

  data() {
    return {
      is_related: (p) => (this.item.related_products || []).indexOf(p.id) >= 0
    }
  },

  mounted() {
    this.short_description_editor = CodeMirror(this.$el.querySelector('[name="short_description"]'))
    this.long_description_editor = CodeMirror(this.$el.querySelector('[name="long_description"]'))
    $('.selectize', this.$el).selectize()
  },

  updated() {
    this.short_description_editor.setValue(this.item.short_description || '')
    this.long_description_editor.setValue(this.item.long_description || '')
  }
}
