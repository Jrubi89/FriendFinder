import {map} from 'lodash'
import Serialize from 'form-serialize'
import Alert from 'appril-alert'
import {popup} from 'appril-utils'
import utils from 'crudle/utils'

export default {
  template: require('./template'),

  methods: {
    matched(evt) {
      popup(this.component.url('email_matched', Serialize(evt.target.closest('form'), {hash: true})))
    },

    selected(evt) {
      let selected = map(utils.selected_list_items, 'value')
      if (selected.length == 0)
        return Alert.warning('No users selected')
      popup(this.component.url('email_selected', {selected}))
    }
  }
}
