var webpack = require('webpack');

var plugins = [
  new webpack.optimize.CommonsChunkPlugin({names: ['core'], minChunks: 2}),

  new webpack.ProvidePlugin({
    $: 'jquery',
    jQuery: 'jquery'
  }),

  new webpack.DefinePlugin({
    APP_ENV: JSON.stringify(APP_ENV),
    'process.env': {
      NODE_ENV: JSON.stringify(APP_ENV)
    }
  }),
]

if (APP_ENV === 'production') {
  plugins.push(new webpack.optimize.UglifyJsPlugin({
    compress: { warnings: false },
    screwIE8: true,
    sourceMap: false,
    mangle: true
  }))
}

module.exports = plugins
