require File.expand_path("../../../config/config.rb", __FILE__)

module Admin
  # loading .yml configs from current directory
  Cfg = Appril.load_config(File.expand_path('..', __FILE__))

  def Cfg.[] key
    super || Cache.options[key]
  end

  # it is highly recommended to freeze configs so they stay unaltered on runtime.
  Cfg.freeze

  # loading any .rb files in current dir.
  # this one will be skipped automatically.
  %w[
    ../*.rb
    ../**/*.rb
  ].each {|p| Dir[File.expand_path(p, __FILE__)].each {|f| require(f)} }
end
